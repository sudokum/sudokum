<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Minik Sudoku</title>

<style>
body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #f0f8ff;
}
h1 { color: #2c3e50; }

table {
    margin: 20px auto;
    border-collapse: collapse;
    border: 4px solid #2c3e50;
}

td {
    width: 60px;
    height: 60px;
    border: 1px solid #2c3e50;
    font-size: 26px;
    text-align: center;
    cursor: pointer;
    background: white;
}

td.block-right { border-right: 4px solid #2c3e50; }
td.block-bottom { border-bottom: 4px solid #2c3e50; }

td.fixed {
    background: #dfe6e9;
    font-weight: bold;
    cursor: default;
}

td.selected { background-color: #b3d9ff !important; }
td.related  { background-color: #eaf4ff; }
td.block    { background-color: #dfefff; }
td.same-number { background-color: #ffeaa7; }

td.wrong {
    background-color: #ff6b6b !important;
}

td.completed {
    background-color: #b8f7c1 !important;
}

button {
    margin: 6px;
    font-size: 18px;
    padding: 10px 16px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background: #74b9ff;
    color: white;
}
button:hover { background: #0984e3; }

.level-btn {
    background: #55efc4;
    color: #2d3436;
}
.level-btn:hover {
    background: #00b894;
}

#message {
    font-size: 22px;
    color: green;
    margin-top: 15px;
}
</style>
</head>

<body>

<h1>ðŸ§© Minik Sudoku</h1>
<p>Seviyeni ve tabloyu seÃ§ ðŸ˜Š</p>

<div>
    <button class="level-btn" onclick="setLevel(6)">ðŸŸ¢ Kolay</button>
    <button class="level-btn" onclick="setLevel(8)">ðŸŸ¡ Orta</button>
    <button class="level-btn" onclick="setLevel(10)">ðŸ”´ Zor</button>
</div>

<div>
    <button onclick="setMode('4x4')">4Ã—4</button>
    <button onclick="setMode('6x6')">6Ã—6</button>
</div>

<table id="sudoku"></table>

<div id="numbers"></div>

<div>
    <button onclick="newGame()">ðŸ”„ Yeni Oyun</button>
</div>

<div id="message"></div>

<script>
/* ================= MODES ================= */
const MODES = {
    "4x4": {
        gridSize: 4,
        blockRows: 2,
        blockCols: 2,
        numbers: [1,2,3,4],
        remove: 6
    },
    "6x6": {
        gridSize: 6,
        blockRows: 2,
        blockCols: 3,
        numbers: [1,2,3,4,5,6],
        remove: 12
    }
};

let currentMode = MODES["4x4"];
let solution = [];
let puzzle = [];
let filled = [];
let selectedNumber = null;
let removeCount = currentMode.remove;

/* ================= UI ================= */
function setMode(modeKey) {
    currentMode = MODES[modeKey];
    removeCount = currentMode.remove;
    selectedNumber = null;
    buildNumberButtons();
    newGame();
}

function setLevel(count) {
    removeCount = count;
    newGame();
}

function buildNumberButtons() {
    const box = document.getElementById("numbers");
    box.innerHTML = "";
    currentMode.numbers.forEach(n => {
        const btn = document.createElement("button");
        btn.textContent = n;
        btn.onclick = () => selectNumber(n);
        box.appendChild(btn);
    });
}

function selectNumber(num) {
    selectedNumber = num;
    clearHighlights();
    highlightSameNumbers(num);
}

/* ================= LOGIC ================= */
function clearHighlights() {
    document.querySelectorAll("#sudoku td").forEach(td => {
        if (!td.classList.contains("wrong")) {
            td.classList.remove("selected","related","block","same-number");
        }
    });
}

function highlight(r,c) {
    clearHighlights();
    document.querySelectorAll("#sudoku td").forEach(td => {
        const row = +td.dataset.row;
        const col = +td.dataset.col;

        if (row === r && col === c) td.classList.add("selected");
        else if (row === r || col === c) td.classList.add("related");

        if (
            Math.floor(row / currentMode.blockRows) === Math.floor(r / currentMode.blockRows) &&
            Math.floor(col / currentMode.blockCols) === Math.floor(c / currentMode.blockCols)
        ) td.classList.add("block");
    });
}

function highlightSameNumbers(num) {
    document.querySelectorAll("#sudoku td").forEach(td => {
        if (td.textContent == num && !td.classList.contains("wrong")) {
            td.classList.add("same-number");
        }
    });
}

/* ================= GENERATOR ================= */
function generateSolution() {
    const size = currentMode.gridSize;
    const nums = currentMode.numbers;
    let base = [];

    for (let r=0;r<size;r++) {
        base[r]=[];
        for (let c=0;c<size;c++) {
            base[r][c]=nums[(c+r)%size];
        }
    }
    return base;
}

function generatePuzzle(sol) {
    let puz = sol.map(r=>r.slice());
    let removed = 0;
    while (removed < removeCount) {
        let r = Math.floor(Math.random()*currentMode.gridSize);
        let c = Math.floor(Math.random()*currentMode.gridSize);
        if (puz[r][c]!==0) {
            puz[r][c]=0;
            removed++;
        }
    }
    return puz;
}

/* ================= BOARD ================= */
function createBoard() {
    const table = document.getElementById("sudoku");
    table.innerHTML="";
    document.getElementById("message").textContent="";

    solution = generateSolution();
    puzzle = generatePuzzle(solution);
    filled = puzzle.map(r=>r.slice());

    for (let r=0;r<currentMode.gridSize;r++) {
        const tr=document.createElement("tr");
        for (let c=0;c<currentMode.gridSize;c++) {
            const td=document.createElement("td");
            td.dataset.row=r;
            td.dataset.col=c;

            if ((c+1)%currentMode.blockCols===0 && c!==currentMode.gridSize-1)
                td.classList.add("block-right");
            if ((r+1)%currentMode.blockRows===0 && r!==currentMode.gridSize-1)
                td.classList.add("block-bottom");

            if (puzzle[r][c]!==0) {
                td.textContent=puzzle[r][c];
                td.classList.add("fixed");
                td.onclick=()=>highlight(r,c);
            } else {
                td.onclick=()=>{
                    highlight(r,c);
                    if (!selectedNumber) return;

                    td.textContent=selectedNumber;
                    filled[r][c]=selectedNumber;

                    if (selectedNumber!==solution[r][c]) {
                        td.classList.add("wrong");
                        setTimeout(()=>{
                            td.textContent="";
                            td.classList.remove("wrong");
                            filled[r][c]=0;
                        },1000);
                        return;
                    }
                    checkWin();
                };
            }
            tr.appendChild(td);
        }
        table.appendChild(tr);
    }
}

function checkWin() {
    for (let r=0;r<currentMode.gridSize;r++)
        for (let c=0;c<currentMode.gridSize;c++)
            if (filled[r][c]!==solution[r][c]) return;

    document.getElementById("message").textContent="ðŸŽ‰ Tebrikler!";
}

function newGame() {
    createBoard();
}

buildNumberButtons();
createBoard();
</script>

</body>
</html>
